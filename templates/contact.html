{% extends "layout.html" %}

{% block title %}
    –ö–æ–Ω—Ç–∞–∫—Ç—ã | –°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏
{% endblock %}

{% block meta %}
    <meta name="description" content="–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –¥–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π, –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞. –ú—ã –≤—Å–µ–≥–¥–∞ —Ä–∞–¥—ã –ø–æ–º–æ—á—å!">
    <meta name="keywords" content="–∫–æ–Ω—Ç–∞–∫—Ç—ã, –ø–æ–¥–¥–µ—Ä–∂–∫–∞, –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å, —Å–≤—è–∑—å —Å –Ω–∞–º–∏">
{% endblock %}

{% block main %}
<!-- Header Section -->
<header class="bg-primary text-white text-center py-10">
    <div class="container">
        <h1 class="fw-bold">üì© –°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏</h1>
        <p class="lead">–ï—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ –≤–æ–ø—Ä–æ—Å—ã? –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º, –∏ –º—ã –æ—Ç–≤–µ—Ç–∏–º –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è!</p>
    </div>
</header>

<!-- Contact Form Section -->
<main class="container my-5">
    <h2 class="text-center mb-4">üì¨ –§–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏</h2>

    <div class="row justify-content-center">
        <div class="col-md-8">
            <!-- Success Message -->
            <div id="submitSuccessMessage" class="alert alert-success d-none">
                ‚úÖ –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ! –ú—ã –æ—Ç–≤–µ—Ç–∏–º –≤–∞–º –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.
            </div>
            <!-- Error Message -->
            <div id="submitErrorMessage" class="alert alert-danger d-none">
                ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ –ø–æ–∑–∂–µ.
            </div>

            <form id="contactForm" method="POST" action="/kontakty/">
                <div class="form-floating mb-3">
                    <input class="form-control" id="name" name="name" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è..." required />
                    <label for="name">–ò–º—è</label>
                    <div class="invalid-feedback">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –≤–∞—à–µ –∏–º—è.</div>
                </div>
                <div class="form-floating mb-3">
                    <input class="form-control" id="email" name="email" type="email" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à—É –ø–æ—á—Ç—É..." required />
                    <label for="email">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞</label>
                    <div class="invalid-feedback">–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email.</div>
                </div>
                <div class="form-floating mb-3">
                    <textarea class="form-control" id="message" name="message" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." style="height: 10rem" required></textarea>
                    <label for="message">–°–æ–æ–±—â–µ–Ω–∏–µ</label>
                    <div class="invalid-feedback">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.</div>
                </div>
                <button class="btn btn-primary w-100 text-uppercase" id="submitButton" type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </form>
        </div>
    </div>
</main>

<script>
    document.getElementById('contactForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const submitButton = document.getElementById('submitButton');
        submitButton.disabled = true; // Prevent multiple submissions

        const formData = new FormData(this);

        fetch('/kontakty/', {
            method: 'POST',
            body: formData
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.');
            }
            return response.json();
        })
        .then(data => {
            document.getElementById('submitSuccessMessage').classList.remove('d-none');
            document.getElementById('submitErrorMessage').classList.add('d-none');
            document.getElementById('contactForm').reset();
        })
        .catch(error => {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã:', error); // Logs error for debugging
            document.getElementById('submitErrorMessage').classList.remove('d-none');
            document.getElementById('submitSuccessMessage').classList.add('d-none');
        })
        .finally(() => {
            submitButton.disabled = false; // Re-enable button
        });
    });
</script>

{% endblock %}
